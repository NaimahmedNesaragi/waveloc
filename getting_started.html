<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Getting Started &mdash; waveloc 0.2.0 documentation</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="waveloc 0.2.0 documentation" href="index.html" />
    <link rel="prev" title="Introduction" href="intro.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Introduction"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">waveloc 0.2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>This is a quick guide for getting started with WaveLoc.</p>
<div class="section" id="download-and-installation">
<h2>Download and installation<a class="headerlink" href="#download-and-installation" title="Permalink to this headline">¶</a></h2>
<p>The latest stable source distributions are downloadable from <a class="reference external" href="http://aws.amazon.com">AmazonAWS</a>:</p>
<ul class="simple">
<li><a class="reference external" href="https://s3.amazonaws.com/waveloc/waveloc-0.2.0.tar.gz">waveloc-0.2.0.tar.gz</a></li>
<li><a class="reference external" href="https://s3.amazonaws.com/waveloc/waveloc-0.1.1.tar.gz">waveloc-0.1.1.tar.gz</a></li>
<li><a class="reference external" href="https://s3.amazonaws.com/waveloc/waveloc-0.1.0.tar.gz">waveloc-0.1.0.tar.gz</a></li>
</ul>
<p>The <a class="reference external" href="https://github.com/amaggi/waveloc/archive/master.zip">latest development source archive</a> is available from the
<a class="reference external" href="http://github.com/amaggi/waveloc">WaveLoc Github pages</a>, which is also the
place you should go if you would like to contribute to the project using the
Github <a class="reference external" href="https://help.github.com/articles/fork-a-repo">fork</a> and
<a class="reference external" href="https://help.github.com/articles/using-pull-requests">pull-request</a>
procedures.</p>
<p><strong>System requirements</strong> :</p>
<ul class="simple">
<li>python 2.7, numpy &gt;= 1.6.1</li>
<li>HDF5 (available here: <a class="reference external" href="http://www.hdfgroup.org/ftp/HDF5/current/src/">http://www.hdfgroup.org/ftp/HDF5/current/src/</a>)</li>
<li>h5py &gt;= 2.0.0 (available here: <a class="reference external" href="http://code.google.com/p/h5py/">http://code.google.com/p/h5py/</a>)</li>
<li>obspy &gt; 0.7.1 (available here: <a class="reference external" href="http://obspy.org">http://obspy.org</a>)</li>
<li>NonLinLoc for time grid calculation (not strictly required, available here: <a class="reference external" href="http://alomax.free.fr/nlloc/">http://alomax.free.fr/nlloc/</a>)</li>
<li>other stuff I&#8217;ve surelly fogotten about...</li>
</ul>
<p>The easiest way to get all the required python modules (except
for obspy) is to install a recent version of the full <a class="reference external" href="http://enthought.com/products/epd.php">Enthought Python
Distribution</a>.  Enthought deliver
<a class="reference external" href="http://enthought.com/products/edudownload.php">free licenses for academic use</a>.
Enthought also bundle a completely free version, but it does not have all the
necessary modules (notably h5py).</p>
<p>If your python distribution does not include h5py and you
need to compile HDF5 under macosx, make sure that it is configured 32-bit when
using a 32-bit python distribution. (e.g., CC=&#8217;cc -m32&#8217; ./configure
&#8211;prefix=/usr/local/hdf5).</p>
<p>You should then be able to install the obspy modules by running</p>
<div class="highlight-python"><div class="highlight"><pre>easy_install -U obspy
</pre></div>
</div>
<div class="section" id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h3>
<p>Untar the distribution, then install in the usual Python manner :</p>
<div class="highlight-python"><div class="highlight"><pre>python setup.py install
</pre></div>
</div>
<p>If you want to use <tt class="docutils literal"><span class="pre">NonLinLoc</span></tt> to calculate the 3D time-grids, download it
from Anthony Lomax&#8217;s website <a class="reference external" href="http://alomax.free.fr/nlloc/">http://alomax.free.fr/nlloc/</a>, and install it where
you prefer (you just need to be able to call <tt class="docutils literal"><span class="pre">Vel2Grid</span></tt> and <tt class="docutils literal"><span class="pre">Grid2Time</span></tt>
correctly).</p>
</div>
</div>
<div class="section" id="running-the-examples">
<h2>Running the examples<a class="headerlink" href="#running-the-examples" title="Permalink to this headline">¶</a></h2>
<p>In order to get you started running waveloc, we have prepared the following
example scripts :</p>
<ol class="arabic simple">
<li>a synthetic test example;</li>
<li>a real migration example;</li>
<li>a synthetic network response test example.</li>
</ol>
<p>You should find the relevant scripts in the <tt class="docutils literal"><span class="pre">examples</span></tt> directory in the
waveloc distribution.</p>
<ul>
<li><p class="first">For the tests, temporarily set the environment variable <tt class="docutils literal"><span class="pre">$WAVELOC_PATH</span></tt> to
the directory you would like the tests to run in.</p>
</li>
<li><p class="first">Download the test data here : <a class="reference external" href="https://s3.amazonaws.com/waveloc/test_data.tar.gz">test_data.tar.gz</a> (beware : it is a
230 Mb file), and unpack the archive in the  <tt class="docutils literal"><span class="pre">$WAVELOC_PATH</span></tt> directory.</p>
</li>
<li><p class="first">Run the <tt class="docutils literal"><span class="pre">setup_examples.py</span></tt> script to set up the required directory structure
for the examples:</p>
<div class="highlight-python"><div class="highlight"><pre>cd examples
python setup_examples.py
</pre></div>
</div>
</li>
</ul>
<div class="section" id="running-the-synthetic-test">
<h3>Running the synthetic test<a class="headerlink" href="#running-the-synthetic-test" title="Permalink to this headline">¶</a></h3>
<p>Run the <tt class="docutils literal"><span class="pre">run_syn_example.py</span></tt> script to run the synthetic test.  The first time
you run the script it will take a long time, as the time grids need to be
interpolated.  After the run, you should the find the following figure in the
directory <tt class="docutils literal"><span class="pre">$WAVELOC_PATH/out/EXAMPLE_Dirac/fig</span></tt>:</p>
<a class="reference internal image-reference" href="_images/test_grid4D_hires.png"><img alt="_images/test_grid4D_hires.png" class="align-center" src="_images/test_grid4D_hires.png" style="width: 800px;" /></a>
<p>You can test the effect of reducing the station coverage by uncommenting the
following line in the script and re-running the test.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#uncomment remove some stations to test response for fewer stations</span>
<span class="c">#wo.opdict[&#39;sta_list&#39;]=&quot;FJS,FLR,FOR,HDL,RVL,SNE,UV01,UV02,UV03,UV04,UV05,UV06,UV07,UV08,UV09,UV10,UV11,UV12,UV13,UV14,UV15&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="running-the-migration-test">
<h3>Running the migration test<a class="headerlink" href="#running-the-migration-test" title="Permalink to this headline">¶</a></h3>
<p>Run the <tt class="docutils literal"><span class="pre">run_waveloc_example.py</span></tt> script to run the synthetic test.  The first
time you run the script it will take a long time, as the time grids need to be
interpolated.  After the run, you should the find the a file named
<tt class="docutils literal"><span class="pre">locations.dat</span></tt> in the following directory
<tt class="docutils literal"><span class="pre">$WAVELOC_PATH/out/EXAMPLE_fullRes/loc</span></tt>.  The file should contain the following
lines, indicating that two events were found:</p>
<div class="highlight-python"><div class="highlight"><pre>Max = 31765.70, 2010-10-14T00:15:57.470000 - 0.19 s + 0.16 s, x= 366.1429 pm 0.2412 km, y= 7650.5498 pm 0.2053 km, z= -0.6714 pm 0.5304 km
Max = 19545.76, 2010-10-14T00:17:13.890000 - 0.15 s + 0.13 s, x= 366.0179 pm 0.1627 km, y= 7650.7056 pm 0.1168 km, z= -0.8661 pm 0.4456 km
</pre></div>
</div>
<p>In the <tt class="docutils literal"><span class="pre">$WAVELOC_PATH/out/EXAMPLE_fullRes/loc</span></tt> you should find figures that look
like:</p>
<a class="reference internal image-reference" href="_images/grid_2010-10-14T00:17:13.890000.png"><img alt="_images/grid_2010-10-14T00:17:13.890000.png" class="align-center" src="_images/grid_2010-10-14T00:17:13.890000.png" style="width: 800px;" /></a>
<p>and:</p>
<a class="reference internal image-reference" href="_images/loc_2010-10-14T00:17:13.890000.png"><img alt="_images/loc_2010-10-14T00:17:13.890000.png" class="align-center" src="_images/loc_2010-10-14T00:17:13.890000.png" style="width: 800px;" /></a>
</div>
<div class="section" id="running-the-network-response-test">
<h3>Running the network response test<a class="headerlink" href="#running-the-network-response-test" title="Permalink to this headline">¶</a></h3>
<p>Run the <tt class="docutils literal"><span class="pre">run_syn_resolution_example.py</span></tt> script to run the network response
test. Each point in the search grid is tested using a synthetic test to
determine the location error. Location error is measured using three metrics:
the Euclidean distance between the true location and that found by waveloc; the
number of locations found by waveloc (there should be only one, but when the
point tested is outside of the network more than one location may be found);
the origin time shift (waveloc origin time minus true origin time).</p>
<p>In the <tt class="docutils literal"><span class="pre">$WAVELOC_PATH/out/EXAMPLE_Dirac/fig</span></tt> directory you should find figures
that look like:</p>
<a class="reference internal image-reference" href="_images/waveloc_resolution_-1.00km.png"><img alt="_images/waveloc_resolution_-1.00km.png" class="align-center" src="_images/waveloc_resolution_-1.00km.png" style="width: 800px;" /></a>
<p>where the blue dots indicate the positions of the stations.
In order to reduce computation time, the example uses decimation of the full
grid (and the full grid itself only contains part of the domain covered by the
stations). Modify the following line to increase / decreasce the decimation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">doResolutionTest</span><span class="p">(</span><span class="n">wo</span><span class="p">,</span><span class="n">grid_info</span><span class="p">,</span><span class="n">hdf_filename</span><span class="p">,</span><span class="n">loclevel</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span><span class="n">decimation</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">3</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Getting Started</a><ul>
<li><a class="reference internal" href="#download-and-installation">Download and installation</a><ul>
<li><a class="reference internal" href="#installation">Installation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#running-the-examples">Running the examples</a><ul>
<li><a class="reference internal" href="#running-the-synthetic-test">Running the synthetic test</a></li>
<li><a class="reference internal" href="#running-the-migration-test">Running the migration test</a></li>
<li><a class="reference internal" href="#running-the-network-response-test">Running the network response test</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="intro.html"
                        title="previous chapter">Introduction</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/getting_started.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="intro.html" title="Introduction"
             >previous</a> |</li>
        <li><a href="index.html">waveloc 0.2.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2014, Alessia Maggi.
      Last updated on May 24, 2014.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>